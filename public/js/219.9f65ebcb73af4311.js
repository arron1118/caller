"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[219,606,474],{6043:(e,t,o)=>{o.d(t,{v:()=>r});var n=o(9669),l=o.n(n),a=o(9680);function r(e,t){return new Promise((function(o,n){l().post(route(e),t).then((function(e){o(e.data)})).catch((function(e){n(e.data)}))}))}l().interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),l().interceptors.response.use((function(e){return 5003===e.data.code&&(route().current(),a.Inertia.get(route("admin.login"))),e}),(function(e){return Promise.reject(e)}))},6943:(e,t,o)=>{o.r(t),o.d(t,{aa:()=>r,allExportExcel:()=>p,bb:()=>c,code:()=>s,replaceStr:()=>u,selectExportExcel:()=>b});var n=o(4865),l=o(4826),a=o(5244),r="aaa";function c(){return"bb"}var s=function(e){return/^1[3456789]{1}\d{9}$/.test(e)},u=function(e,t){var o=e.substring(4,6),n=o.replace(o,t);return e.substring(0,3)+n+e.substring(7,11)},i=(0,n.ref)([]),p=function(e,t,o){l.T.confirm("将导出为excel文件，确认导出?",{confirmButtonText:"导出",cancelButtonText:"取消",type:"success"}).then((function(){i.value=e,d(e,t,o)})).catch((function(){}))},d=function(e,t,n){o.e(719).then(function(){var e=o(8719).export_json_to_excel,l=[],a=[];t.forEach((function(e){l.push(e.label),a.push(e.value)}));var r=i.value,c=m(a,r);e(l,c,n)}.bind(null,o)).catch(o.oe)},m=function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},f=(0,n.ref)([]),b=function(e,t,o){if(e.length<1)return(0,a.z8)({type:"warning",message:"请选择需要导出的数据"}),!1;l.T.confirm("将导出为excel文件，确认导出?",{confirmButtonText:"导出",cancelButtonText:"取消",type:"success"}).then((function(){f.value=e,h(e,t,o)})).catch((function(){}))},h=function(e,t,n){o.e(719).then(function(){var e=o(8719).export_json_to_excel,l=[],a=[];t.forEach((function(e){l.push(e.label),a.push(e.value)}));var r=f.value,c=x(a,r);e(l,c,n)}.bind(null,o)).catch(o.oe)},x=function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))}},3744:(e,t)=>{t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[e,n]of t)o[e]=n;return o}},1219:(e,t,o)=>{o.r(t),o.d(t,{default:()=>f});var n=o(4865),l={class:"mb-6 bg-white rounded shadow p-4"},a={class:"border rounded"},r={class:"m-2 flex flex-row justify-between border-b pb-2"},c=(0,n.createElementVNode)("div",null,null,-1),s={class:"flex flex-column justify-center items-center mx-4"},u=(0,n.createTextVNode)("选择导出"),i=(0,n.createTextVNode)("全部导出");var p=o(9606),d=o(6043);const m={name:"List",components:{BasicTable:p.default},setup:function(e,t){var n=o(6943);return{allExportExcel:n.allExportExcel,selectExportExcel:n.selectExportExcel}},data:function(){return{params:{page:1,limit:10},total:0,loading:!1,tableLoading:!1,tableTitle:[{label:"帐号",value:"axb_number",sortable:!1},{label:"手机号",value:"company",sortable:!1},{label:"小号",value:"company",sortable:!1},{label:"呼叫总数",value:"customer",sortable:!1},{label:"总消费",value:"user_id",sortable:!1},{label:"登录时间",value:"createtime",sortable:!0}],tableData:[],selectTableData:[]}},mounted:function(){this.getTableData()},methods:{getTableData:function(){var e=this;this.loading=!0,(0,d.v)("getHistoryList",this.params).then((function(t){1===t.code&&(e.loading=!1,e.tableData=t.data,e.total=t.total)}))},selectExportData:function(e){this.selectTableData=e}}};const f=(0,o(3744).Z)(m,[["render",function(e,t,o,p,d,m){var f=this,b=(0,n.resolveComponent)("el-button"),h=(0,n.resolveComponent)("basic-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("div",r,[c,(0,n.createElementVNode)("div",s,[(0,n.createVNode)(b,{type:"text",onClick:t[0]||(t[0]=function(e){return p.selectExportExcel(f.selectTableData,f.tableTitle,"已开通用户报表")})},{default:(0,n.withCtx)((function(){return[u]})),_:1}),(0,n.createVNode)(b,{type:"text",onClick:t[1]||(t[1]=function(e){return p.allExportExcel(f.tableData,f.tableTitle,"已开通用户报表")})},{default:(0,n.withCtx)((function(){return[i]})),_:1})])]),(0,n.createVNode)(h,{tableTitle:d.tableTitle,tableData:d.tableData,loading:d.loading,pagination:!0,total:d.total,params:d.params,getTableData:m.getTableData,selectionType:!0,onSelectExports:m.selectExportData},null,8,["tableTitle","tableData","loading","total","params","getTableData","onSelectExports"])])])}]])},9606:(e,t,o)=>{o.r(t),o.d(t,{default:()=>x});var n=o(4865),l={key:0,class:"m-2 text-right border-b pb-2 flex flex-row justify-between"},a={class:"flex flex-column justify-center items-center mx-4"},r=(0,n.createTextVNode)("选择导出 "),c=(0,n.createTextVNode)("全部导出"),s=(0,n.createTextVNode)("筛选列"),u={key:1,class:"table-bottom m-4"};var i=o(7757),p=o.n(i),d=o(3474),m=o(6043),f=o(6112);function b(e,t,o,n,l,a,r){try{var c=e[a](r),s=c.value}catch(e){return void o(e)}c.done?t(s):Promise.resolve(s).then(n,l)}const h={name:"BasicTable",components:{vPagination:d.default,Refresh:f.Z},props:["tableTitle","operates","specialNumber","specialUser","testNumbers","states","specialUsername","selectionType","pagination","where","payWays","payStatus","showSummary","buttonGroups","url","exportName","openAccountSlot","releaseNewsSlot","batchImportSlot"],setup:function(e,t){var l=o(6943),a=l.allExportExcel,r=l.selectExportExcel,c=l.replaceStr,s=(0,n.ref)([]),u=(0,n.ref)([]),i=(0,n.ref)(0),d=(0,n.ref)(!1),m=(0,n.ref)([]),f=(0,n.ref)(Object.assign({},{page:1,limit:15},e.where)),h=function(){var e,t=(e=p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.value=t;case 1:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(n,l){var a=e.apply(t,o);function r(e){b(a,n,l,r,c,"next",e)}function c(e){b(a,n,l,r,c,"throw",e)}r(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{selectExport:s,handleSelectionChange:h,handleColumn:function(e,o,n,l){e.isCalled=!e.isCalled,!0===e.isCalled?e.called_number=e.called_number_copy:!1===e.isCalled&&(e.called_number=c(e.called_number,"****")),"user_id"===o.property&&t.emit("dialogUserList",!0,e.id)},replaceStr:c,filterWays:function(e,o){console.log(e),console.log(o),o.status=e,console.log(o.status),t.emit("getPayWays",o.status)},filterStatus:function(e,o){console.log(e),console.log(o),o.status=e,console.log(o.status),t.emit("getPayStatus",o.status)},filterTestNumbers:function(e,o){console.log(e),console.log(o),o.testNumbers=e,console.log(o.testNumbers),t.emit("getTestNumbers",o.testNumbers)},filterStates:function(e,o){console.log(e),console.log(o),o.states=e,console.log(o.states),t.emit("getStates",o.states)},selectExportExcel:r,allExportExcel:a,selectTableData:u,tableData:m,total:i,loading:d,params:f}},mounted:function(){this.getTableData()},watch:{where:function(e,t){this.getTableData()}},methods:{getTableData:function(){var e=this;this.loading=!0,(0,m.v)(this.url,this.params).then((function(t){console.log(t),1===t.code&&(e.loading=!1,e.tableData=t.data,e.total=t.total)}))}}};const x=(0,o(3744).Z)(h,[["render",function(e,t,o,i,p,d){var m=(0,n.resolveComponent)("el-button"),f=(0,n.resolveComponent)("el-checkbox"),b=(0,n.resolveComponent)("el-popover"),h=(0,n.resolveComponent)("refresh"),x=(0,n.resolveComponent)("el-icon"),g=(0,n.resolveComponent)("el-table-column"),v=(0,n.resolveComponent)("el-table"),y=(0,n.resolveComponent)("v-pagination"),C=(0,n.resolveComponent)("el-col"),k=(0,n.resolveComponent)("el-row"),w=(0,n.resolveDirective)("loading");return(0,n.openBlock)(),(0,n.createBlock)(k,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(C,null,{default:(0,n.withCtx)((function(){return[!0===o.buttonGroups?((0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.createElementVNode)("div",null,[!0===o.openAccountSlot?(0,n.renderSlot)(e.$slots,"openAccount",{key:0}):(0,n.createCommentVNode)("",!0),!0===o.releaseNewsSlot?(0,n.renderSlot)(e.$slots,"releaseNews",{key:1}):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",a,[!0===o.batchImportSlot?(0,n.renderSlot)(e.$slots,"batchImport",{key:0}):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(m,{type:"text",onClick:t[0]||(t[0]=function(e){return i.selectExportExcel(i.selectExport,o.tableTitle,o.exportName)})},{default:(0,n.withCtx)((function(){return[r]})),_:1}),(0,n.createVNode)(m,{type:"text",onClick:t[1]||(t[1]=function(e){return i.allExportExcel(i.tableData,o.tableTitle,o.exportName)})},{default:(0,n.withCtx)((function(){return[c]})),_:1}),(0,n.createVNode)(b,{placement:"bottom",width:150,"popper-class":"h-60 overflow-y-scroll",trigger:"click"},{reference:(0,n.withCtx)((function(){return[(0,n.createVNode)(m,{type:"text",style:{"margin-right":"16px"}},{default:(0,n.withCtx)((function(){return[s]})),_:1})]})),default:(0,n.withCtx)((function(){return[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.tableTitle,(function(e){return(0,n.openBlock)(),(0,n.createBlock)(f,{modelValue:e.show,"onUpdate:modelValue":function(t){return e.show=t},label:e.label,size:"large"},null,8,["modelValue","onUpdate:modelValue","label"])})),256))]})),_:1}),(0,n.createVNode)(m,{type:"text",plain:"",class:"mr-2"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(x,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(h)]})),_:1})]})),_:1})])])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(v,{data:i.tableData,style:{width:"100%"},ref:"multipleTableRef",onSelectionChange:i.handleSelectionChange,id:"print","sum-text":"合计","show-summary":o.showSummary,"row-key":"id",onCellClick:i.handleColumn},{default:(0,n.withCtx)((function(){return[!0===o.selectionType?((0,n.openBlock)(),(0,n.createBlock)(g,{key:0,type:"selection",width:"55"})):(0,n.createCommentVNode)("",!0),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.tableTitle.filter((function(e){return e.show})),(function(t,o){return(0,n.openBlock)(),(0,n.createBlock)(g,{key:o,prop:t.value,label:t.label,sortable:!0===t.sortable},(0,n.createSlots)({_:2},["called_number"===t.value?{name:"default",fn:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"specialNumber",{scope:t})]}))}:void 0,"user_id"===t.value?{name:"default",fn:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"specialUser",{scope:t})]}))}:void 0,"username"===t.value?{name:"default",fn:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"specialUsername",{scope:t})]}))}:void 0]),1032,["prop","label","sortable"])})),128)),o.testNumbers?((0,n.openBlock)(),(0,n.createBlock)(g,{key:1,label:o.testNumbers.label,prop:"testNumbers",filters:[{text:"是",value:"0"},{text:"否",value:"1"}],"filter-method":i.filterTestNumbers,"filter-placement":"bottom-end","column-key":"testNumbers"},{default:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"testNumbers",{scope:t})]})),_:3},8,["label","filter-method"])):(0,n.createCommentVNode)("",!0),o.states?((0,n.openBlock)(),(0,n.createBlock)(g,{key:2,label:o.states.label,prop:"states",filters:[{text:"禁用",value:"0"},{text:"正常",value:"1"}],"filter-method":i.filterStates,"filter-placement":"bottom-end","column-key":"states"},{default:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"states",{scope:t})]})),_:3},8,["label","filter-method"])):(0,n.createCommentVNode)("",!0),o.operates?((0,n.openBlock)(),(0,n.createBlock)(g,{key:3,label:o.operates.label,fixed:"right",width:"120"},{default:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"operates",{scope:t})]})),_:3},8,["label"])):(0,n.createCommentVNode)("",!0),o.payWays?((0,n.openBlock)(),(0,n.createBlock)(g,{key:4,label:o.payWays.label,prop:"payWays",filters:[{text:"0",value:"0"},{text:"1",value:"1"}],"filter-method":i.filterWays,"filter-placement":"bottom-end","column-key":"payWays"},{default:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"payWays",{scope:t})]})),_:3},8,["label","filter-method"])):(0,n.createCommentVNode)("",!0),o.payStatus?((0,n.openBlock)(),(0,n.createBlock)(g,{key:5,label:o.payStatus.label,prop:"payStatus",filters:[{text:"0",value:"0"},{text:"1",value:"1"},{text:"2",value:"2"}],"filter-method":i.filterStatus,"filter-placement":"bottom-end","column-key":"payStatus"},{default:(0,n.withCtx)((function(t){return[(0,n.renderSlot)(e.$slots,"payStatus",{scope:t})]})),_:3},8,["label","filter-method"])):(0,n.createCommentVNode)("",!0)]})),_:3},8,["data","onSelectionChange","show-summary","onCellClick"])),[[w,i.loading]]),!0===o.pagination?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[(0,n.createVNode)(y,{pageSize:i.params.limit,total:i.total,options:i.params,render:d.getTableData},null,8,["pageSize","total","options","render"])])):(0,n.createCommentVNode)("",!0)]})),_:3})]})),_:3})}]])},3474:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var n=o(4865);const l={name:"Pagination",props:{pageSize:[Number,String],currentPage:[Number,String],total:[Number,String],options:[Object],render:[Function],layout:{type:String,default:"total, sizes, prev, pager, next, jumper"}},setup:function(e,t){return{handlePageChange:function(t){e.options.page=t,e.render()},handleSizeChange:function(t){e.options.limit=t,e.render()}}}};const a=(0,o(3744).Z)(l,[["render",function(e,t,o,l,a,r){var c=(0,n.resolveComponent)("el-pagination");return(0,n.openBlock)(),(0,n.createBlock)(c,{background:"",onSizeChange:l.handleSizeChange,onCurrentChange:l.handlePageChange,"page-sizes":[10,30,100],"page-size":o.pageSize,layout:o.layout,total:o.total},null,8,["onSizeChange","onCurrentChange","page-size","layout","total"])}]])},6112:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(4865),l=o(8957);const a=(0,n.defineComponent)({name:"Refresh"}),r={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},c=[(0,n.createElementVNode)("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1)];var s=(0,l.Z)(a,[["render",function(e,t,o,l,a,s){return(0,n.openBlock)(),(0,n.createElementBlock)("svg",r,c)}]])}}]);